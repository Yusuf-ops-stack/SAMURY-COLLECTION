<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="/touch.css">
<title>SAMURY | Female Collection</title>
<link rel="stylesheet" href="/touch.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">

<style>
body {
  margin: 0;
  font-family: 'Poppins', sans-serif;
  background: #000;
  color: #fff;
  user-select: none;
}
button { cursor: pointer; }

/* --- HEADER --- */
header {
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 20px;
  border-bottom: 1px solid #222;
}
header h1 {
  font-family: 'Playfair Display', serif;
  color: gold;
  letter-spacing: 2px;
}
.back-btn {
  position: absolute;
  left: 25px;
  top: 50%;
  transform: translateY(-50%);
  background: gold;
  color: #000;
  padding: 8px 12px;
  border-radius: 10px;
  border: none;
}

/* --- PRODUCTS GRID --- */
.products {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
  gap: 15px;
  padding: 20px;
}

/* --- PRODUCT CARD --- */
.product {
  background: #111;
  border: 1px solid gold;
  border-radius: 16px;
  overflow: hidden;
  position: relative;
  transition: transform 0.3s, box-shadow 0.3s;
}
.product:hover {
  transform: scale(1.03);
  box-shadow: 0 0 15px rgba(255,215,0,0.3);
}

/* --- IMAGE/VIDEO BOX --- */
.image-box {
  position: relative;
  height: 320px;
  cursor: pointer;
}
.product-img,
.product-video {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
  transition: opacity 0.4s ease;
}
.product-video { opacity: 0; }
.product:hover .product-video { opacity: 1; }
.product:hover .product-img { opacity: 0; }

/* --- PLAY ICON --- */
.play-icon {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 40px;
  color: gold;
  background: rgba(0,0,0,0.3);
  pointer-events: none;
  transition: opacity 0.4s;
}

/* --- WATERMARK --- */
.watermark {
  position: absolute;
  bottom: 8px;
  right: 8px;
  font-family: 'Playfair Display', serif;
  font-size: 14px;
  color: rgba(255,215,0,0.4);
  pointer-events: none;
  user-select: none;
}

/* --- INFO & LIKE BUTTONS --- */
.info-btn, .like-btn {
  position: absolute;
  width: 34px;
  height: 34px;
  border-radius: 50%;
  background: rgba(0,0,0,0.7);
  color: gold;
  border: 1px solid gold;
  z-index: 5;
}
.info-btn { top: 10px; right: 10px; }
.like-btn { top: 10px; left: 10px; }

/* --- PRODUCT DETAILS --- */
.product-details {
  padding: 10px;
  text-align: center;
}
.product-details h3 { color: gold; font-family: 'Playfair Display', serif; font-size: 16px; }
.price { font-size: 13px; color: #ccc; }
.buy-now, .cart-btn {
  border-radius: 20px;
  padding: 6px 14px;
  margin: 5px 0;
  border: none;
}
.buy-now { background: gold; color: #000; }
.cart-btn { background: transparent; color: gold; border: 1px solid gold; }

/* --- MODAL OVERLAY --- */
.modal-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.96);
  backdrop-filter: blur(8px);
  display: none;
  justify-content: center;
  align-items: center;
  z-index: 9999;
  animation: fadeIn 0.3s ease;
}

/* --- MODAL BOX --- */
.modal {
  background: linear-gradient(145deg, #111, #0a0a0a);
  border: 1px solid rgba(255,215,0,0.4);
  border-radius: 20px;
  width: 95%;
  max-width: 480px;
  padding: 20px;
  text-align: center;
  position: relative;
  box-shadow: 0 0 30px rgba(255,215,0,0.15);
  animation: slideUp 0.4s ease;
}

.modal h3 {
  font-family: 'Playfair Display', serif;
  color: gold;
  font-size: 20px;
  margin-bottom: 10px;
  letter-spacing: 1px;
}

/* Elegant divider */
.modal-divider {
  width: 60px;
  height: 2px;
  background: gold;
  margin: 10px auto 15px;
  opacity: 0.6;
}

/* Product description */
.modal-description {
  font-size: 14px;
  color: #ccc;
  line-height: 1.5;
  margin-bottom: 15px;
}

/* Info grid */
.modal-info {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 8px;
  font-size: 13px;
  margin-bottom: 15px;
}

.modal-info div {
  background: rgba(255,215,0,0.05);
  border: 1px solid rgba(255,215,0,0.2);
  border-radius: 10px;
  padding: 6px;
}

.modal-info span {
  display: block;
  font-size: 11px;
  color: #999;
  margin-bottom: 3px;
}

/* --- MODAL CAROUSEL --- */
.carousel {
  position: relative;
  width: 100%;
  height: 320px;
  overflow: hidden;
  border-radius: 14px;
  margin-bottom: 15px;
  box-shadow: 0 0 20px rgba(255,215,0,0.15);
}

.carousel img,
.carousel video {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: none;
  border-radius: 14px;
}

.carousel img.active,
.carousel video.active {
  display: block;
}

.carousel button {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  background: rgba(0,0,0,0.6);
  border: 1px solid gold;
  color: gold;
  font-size: 20px;
  padding: 6px 12px;
  border-radius: 50%;
  cursor: pointer;
  transition: 0.3s;
}

.carousel button:hover {
  background: gold;
  color: #000;
}

.carousel .prev,
.carousel .next {
  width: 44px;
  height: 44px;
  font-size: 18px;
}


/* --- MODAL BUTTONS --- */
.modal button {
  padding: 10px;
  width: 100%;
  border-radius: 14px;
  border: none;
  font-weight: bold;
  margin-top: 8px;
  transition: 0.3s;
}

.modal .add-cart-btn {
  background: transparent;
  color: gold;
  border: 1px solid gold;
}

.modal .add-cart-btn:hover {
  background: gold;
  color: #000;
}

.modal .buy-now-btn {
  background: gold;
  color: #000;
}

.modal .buy-now-btn:hover {
  background: #ffc107;
}

/* --- X CLOSE BUTTON MATCHING INFO BUTTON --- */
.modal-close {
  position: absolute;
  top: 12px;
  right: 12px;
  width: 34px;
  height: 34px;
  background: rgba(0,0,0,0.7);
  border: 1px solid gold;
  border-radius: 50%;
  color: gold;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 16px;
  cursor: pointer;
  z-index: 20;
  transition: 0.3s ease;
}

.modal-close:hover {
  background: gold;
  color: black;
  transform: scale(1.1);
}


/* --- ANIMATIONS --- */
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes slideUp {
  from { transform: translateY(40px); opacity: 0; }
  to { transform: translateY(0); opacity: 1; }
}
/* --- THUMBNAILS --- */
.thumbnail-container {
  display: flex;
  gap: 6px;
  margin: 10px 0 15px;
  overflow-x: auto;
  justify-content: center;
}

.thumbnail-container img,
.thumbnail-container video {
  width: 55px;
  height: 55px;
  object-fit: cover;
  border-radius: 8px;
  cursor: pointer;
  opacity: 0.6;
  border: 2px solid transparent;
  transition: 0.3s ease;
}
.modal {
  position: relative;
}


.thumbnail-container img.active-thumb,
.thumbnail-container video.active-thumb {
  opacity: 1;
  border: 2px solid gold;
  transform: scale(1.05);
}

/* X Close Button */
.modal-close {
  position: absolute;
  top: 820px;        /* slightly closer to top */
  left: 5px;  /* slightly closer to left */
  width: 40px;      /* smaller rectangle width */
  height: 24px;     /* smaller rectangle height */
  background: rgba(0,0,0,0.6);
  border: 2px solid gold; 
  color: gold;
  font-size: 16px;  
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 4px; /* subtle rounded corners */
  cursor: pointer;
  z-index: 9999;
  box-shadow: 0 0 6px rgba(255,215,0,0.6);
  transition: all 0.3s ease;
  padding: 0;       
}

.modal-close:hover {
  background: gold;
  color: #000;
  transform: scale(1.1);
  box-shadow: 0 0 10px rgba(255,215,0,0.8);
}



/* =========================
   MOBILE OPTIMIZATION
========================= */
@media (max-width: 768px) {

  .modal {
    width: 100%;
    height: 100%;
    max-height: 100vh;
    border-radius: 0;
    padding: 20px 15px 30px;
    overflow-y: auto;
  }

  .modal-overlay {
    align-items: flex-end;
  }

  .carousel {
    height: 320px;
  }

  .carousel img,
  .carousel video {
    max-height: 320px;
    object-fit: contain;
  }

  .thumbnail-container {
    justify-content: flex-start;
    padding-bottom: 10px;
  }

  .thumbnail-container img,
  .thumbnail-container video {
    width: 65px;
    height: 65px;
  }

  .modal-info {
    grid-template-columns: 1fr;
    gap: 12px;
  }
  .carousel .prev,
  .carousel .next {
    width: 40px;
    height: 40px;
    font-size: 18px;
  }
}

/* --- LIKE BUTTON POP ANIMATION --- */
.like-btn i {
  transition: transform 0.2s ease, color 0.3s ease;
}
.like-btn.unliked i { color: gold; }
.like-btn.liked i {
  animation: pop-bounce 0.4s forwards;
  color: gold;
}
@keyframes pop-bounce {
  0% { transform: scale(1); }
  50% { transform: scale(1.5); }
  70% { transform: scale(1.3); }
  100% { transform: scale(1.4); }
}
.quantity-container {
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 8px 0;
  gap: 5px;
}

.qty-input {
  width: 40px;
  text-align: center;
  border-radius: 6px;
  border: 1px solid gold;
  background: #111;
  color: gold;
}

.qty-plus, .qty-minus {
  background: gold;
  border: none;
  color: #000;
  padding: 4px 10px;
  border-radius: 6px;
  cursor: pointer;
  font-weight: bold;
}
.size-container {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  margin: 8px 0;
  font-size: 14px;
  color: gold;
}

.size-select {
  padding: 4px 8px;
  border-radius: 6px;
  border: 1px solid gold;
  background: #111;
  color: gold;
}
.buy-now-modal-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.95);
  display: none;
  justify-content: center;
  align-items: center;
  z-index: 10000;
}
.buy-now-modal {
  background: #111;
  border: 1px solid gold;
  border-radius: 16px;
  padding: 20px;
  width: 90%;
  max-width: 350px;
  text-align: center;
}
.buy-now-modal h3 {
  color: gold;
  margin-bottom: 15px;
}
.buy-now-modal button {
  display: block;
  width: 80%;
  margin: 8px auto;
  padding: 10px;
  border: none;
  border-radius: 12px;
  background: gold;
  color: #000;
  font-weight: bold;
  cursor: pointer;
}
.buy-now-modal button:hover {
  background: #ffc107;
}
footer {
  background: #111;          /* dark background */
  color: gold;               /* gold text */
  text-align: center;        /* center the text */
  padding: 10px 0;           /* compact vertical padding */
  font-family: 'Poppins', sans-serif;
  font-size: 14px;           /* small and readable */
  border-top: 1px solid rgba(255, 215, 0, 0.3); /* subtle top border */
  box-shadow: 0 -2px 6px rgba(0,0,0,0.3);       /* soft shadow on top */
}

footer a {
  color: gold;
  text-decoration: none;
  margin-left: 4px;
}

footer a:hover {
  text-decoration: underline;
  color: #fff;
}

</style>
</head>

<body>

<header>
  <button class="back-btn" onclick="window.location.href='/homepage/index.html'">
    <i class="fa-solid fa-circle-left"></i>
  </button>
  <h1>FEMALE COLLECTION</h1>
</header>

<section class="products">
  <!-- PRODUCT CARD TEMPLATE -->
  <div class="product" data-name="Mayah Abaya; Blue Navy">
    <div class="image-box">
      <button class="info-btn"><i class="fa-solid fa-info"></i></button>
      <button class="like-btn"><i class="fa-regular fa-heart"></i></button>
      <img class="product-img" src="/pics/Mayah Abaya; Navy blue.jpeg" loading="lazy">
      <video class="product-video" src="/videos/all.mp4" muted loop playsinline></video>
      <div class="play-icon"><i class="fa-solid fa-play"></i></div>
      <div class="watermark">SAMURY</div>
    </div>
    <div class="product-details">
      <h3>Mayah Abaya; Blue Navy</h3>
      <p class="price">KES 5,500</p>
       <!-- Quantity selector -->
  <div class="quantity-container">
    <button class="qty-minus">-</button>
    <input type="number" class="qty-input" value="1" min="1">
    <button class="qty-plus">+</button>
  </div>
  <!-- Size selector -->
<div class="size-container">
  <label for="size">Size:</label>
  <select class="size-select">
    <option value="S">S</option>
    <option value="M" selected>M</option>
    <option value="L">L</option>
    <option value="XL">XL</option>
  </select>
</div>

      <button class="buy-now">Buy Now</button>
      <button class="cart-btn">Add to Cart</button>
    </div>
  </div>

  <div class="product" data-name="Mayah Abaya; Soft Creme">
    <div class="image-box">
      <button class="info-btn"><i class="fa-solid fa-info"></i></button>
      <button class="like-btn"><i class="fa-regular fa-heart"></i></button>
      <img class="product-img" src="/pics/WhatsApp Image 2026-02-03 at 16.53.58.jpeg" loading="lazy">
      <video class="product-video" src="/videos/mayah-soft-creme..mp4" muted loop playsinline></video>
      <div class="play-icon"><i class="fa-solid fa-play"></i></div>
      <div class="watermark">SAMURY</div>
    </div>
    <div class="product-details">
      <h3>Mayah Abaya; Soft Creme</h3>
      <p class="price">KES 5,500</p>
       <!-- Quantity selector -->
  <div class="quantity-container">
    <button class="qty-minus">-</button>
    <input type="number" class="qty-input" value="1" min="1">
    <button class="qty-plus">+</button>
  </div>
  <!-- Size selector -->
<div class="size-container">
  <label for="size">Size:</label>
  <select class="size-select">
    <option value="S">S</option>
    <option value="M" selected>M</option>
    <option value="L">L</option>
    <option value="XL">XL</option>
  </select>
</div>

      <button class="buy-now">Buy Now</button>
      <button class="cart-btn">Add to Cart</button>
    </div>
  </div>

  <div class="product" data-name="Mayah Abaya; Black">
    <div class="image-box">
      <button class="info-btn"><i class="fa-solid fa-info"></i></button>
      <button class="like-btn"><i class="fa-regular fa-heart"></i></button>
      <img class="product-img" src="/pics/WhatsApp Image 2026-02-03 at 16.53.58 (1).jpeg" loading="lazy">
      <video class="product-video" src="/videos/dida fashion.mp4" muted loop playsinline></video>
      <div class="play-icon"><i class="fa-solid fa-play"></i></div>
      <div class="watermark">SAMURY</div>
    </div>
    <div class="product-details">
      <h3>Mayah Abaya; Black</h3>
      <p class="price">KES 5,5000</p>
       <!-- Quantity selector -->
  <div class="quantity-container">
    <button class="qty-minus">-</button>
    <input type="number" class="qty-input" value="1" min="1">
    <button class="qty-plus">+</button>
  </div>
  <!-- Size selector -->
<div class="size-container">
  <label for="size">Size:</label>
  <select class="size-select">
    <option value="S">S</option>
    <option value="M" selected>M</option>
    <option value="L">L</option>
    <option value="XL">XL</option>
  </select>
</div>

      <button class="buy-now">Buy Now</button>
      <button class="cart-btn">Add to Cart</button>
    </div>
  </div>
  <div class="product" data-name="Sherry Abayaâœ¨">
  <div class="image-box">
    <button class="info-btn"><i class="fa-solid fa-info"></i></button>
    <button class="like-btn"><i class="fa-regular fa-heart"></i></button>

    <img class="product-img" src="/pics/Eid luxe Abayaâœ¨2.jpeg" loading="lazy">
    <video class="product-video" src="/pics/The Sherry Abaya Eid collection.mp4" muted loop playsinline></video>

    <div class="play-icon"><i class="fa-solid fa-play"></i></div>
    <div class="watermark">SAMURY</div>
  </div>

  <div class="product-details">
    <h3>Sherry Abayaâœ¨</h3>
    <p class="price">KES 9,500</p>

    <div class="quantity-container">
      <button class="qty-minus">-</button>
      <input type="number" class="qty-input" value="1" min="1">
      <button class="qty-plus">+</button>
    </div>

    <div class="size-container">
      <label>Size:</label>
      <select class="size-select">
        <option value="S">S</option>
        <option value="M" selected>M</option>
        <option value="L">L</option>
        <option value="XL">XL</option>
      </select>
    </div>

    <button class="buy-now">Buy Now</button>
    <button class="cart-btn">Add to Cart</button>
  </div>
</div>  
</section>
<!-- BUY NOW OPTIONS MODAL -->
<div class="buy-now-modal-overlay" id="buyNowModal">
  <div class="buy-now-modal">
    <h3>Order via:</h3>
    <button class="buy-option" data-platform="instagram">Instagram</button>
    <button class="buy-option" data-platform="whatsapp">WhatsApp</button>
    <button class="buy-option" data-platform="tiktok">TikTok</button>
    <button onclick="closeBuyNowModal()" style="margin-top:10px;">Cancel</button>
  </div>
</div>
<!-- PRODUCT INFO MODAL -->
<div class="modal-overlay" id="modalOverlay">
  <div class="modal">

    <!-- X CLOSE BUTTON -->
<button class="modal-close" onclick="closeModal()">
  <i class="fa-solid fa-xmark"></i>
</button>
    <!-- MAIN CAROUSEL -->
    <div class="carousel">
      <button class="prev"><i class="fa-solid fa-chevron-left"></i></button>
      <button class="next"><i class="fa-solid fa-chevron-right"></i></button>
    </div>

    <!-- THUMBNAILS -->
    <div class="thumbnail-container"></div>

    <h3 id="modalTitle"></h3>
    <div class="modal-divider"></div>

    <p class="modal-description" id="modalDesc"></p>

    <div class="modal-info">
      <div>
        <span>Fabric</span>
        <strong id="modalFabric"></strong>
      </div>
      <div>
        <span>Sizes</span>
        <strong id="modalSizes"></strong>
      </div>
      <div>
        <span>Care</span>
        <strong id="modalCare"></strong>
      </div>
      <div>
        <span>Collection</span>
        <strong>Luxury Line</strong>
      </div>
    </div>

  </div>
</div>

<footer>Â© 2026 SAMURY â€” Female Collection</footer>

<script>
// --- PRODUCT INFO ---
const productInfo = {
  "Mayah Abaya; Blue Navy": {
    desc: "Deep, timeless and effortlessly refined.Fluid lines, subtle shine that speaks without trying ðŸ’™",
    fabric: "Premium Nida",
    sizes: "S, M, L, XL",
    care: "Gentle wash",
    media: [
      "/pics/Mayah Abaya; Navy blue.jpeg",
      "/videos/all.mp4"
    ]
  },

  "Mayah Abaya; Soft Creme": {
    desc: "A graceful flow, subtle shine and carefully finished laced sleevesâ€¦ designed to feel light, effortless and quietly confident",
    fabric: "Soft Crepe",
    sizes: "M, L, XL",
    care: "Dry clean recommended",
    media: [
      "/pics/WhatsApp Image 2026-02-03 at 16.53.58.jpeg",
      "/videos/mayah-soft-creme..mp4"
    ]
  },

  "Mayah Abaya; Black": {
    desc: "Graceful, grounded and unforgettable. A rich drape that moves with quite confidence ðŸ–¤",
    fabric: "Silk Blend",
    sizes: "Free Size",
    care: "Cold wash only",
    media: [
      "/pics/WhatsApp Image 2026-02-03 at 16.53.58 (1).jpeg",
      "/videos/dida fashion.mp4"
    ]
  },

 "Sherry Abayaâœ¨": {
  desc: "Refined embroidery, Effortless drape.",
  fabric: "Premium Dubai Nidha",
  sizes: "S, M, L, XL",
  care: "Dry clean only",
  media: [
    "/pics/Eid luxe Abayaâœ¨2.jpeg",
    "/pics/Eid luxe Abayaâœ¨ 1.jpeg",
    "/pics/Eid luxe Abayaâœ¨4.jpeg",
    "/pics/Eid luxe Abayaâœ¨5.jpeg",
    "/pics/The Sherry Abaya Eid collection.mp4"
  ]
}

};

const buyNowModal = document.getElementById('buyNowModal');
let selectedProduct = null;

// Open modal on Buy Now click
document.querySelectorAll('.buy-now').forEach(btn => {
  btn.addEventListener('click', e => {
    e.stopPropagation();
    selectedProduct = btn.closest('.product');
    buyNowModal.style.display = 'flex';
  });
});

// Close modal
function closeBuyNowModal() {
  buyNowModal.style.display = 'none';
}

// --- Handle platform selection with pre-filled order message ---
document.querySelectorAll('.buy-option').forEach(btn => {
  btn.addEventListener('click', () => {
    if (!selectedProduct) return;

    const name = selectedProduct.dataset.name;
    const qty = selectedProduct.querySelector('.qty-input').value;
    const size = selectedProduct.querySelector('.size-select').value;

    // --- Friendly WhatsApp message ---
    const message = `Hello SAMURY! âœ¨
Iâ€™m interested in ordering: "${name}" ðŸ‘—
Quantity: ${qty}
Size: ${size}

Could you please confirm availability and the next steps? Thank you! ðŸ’›`;

    const platform = btn.dataset.platform;
    switch (platform) {
      case 'instagram':
        window.open(`https://www.instagram.com/direct/t/samuryartelier?text=${encodeURIComponent(message)}`, '_blank');
        break;
      case 'whatsapp':
        window.open(`https://wa.me/254702378716?text=${encodeURIComponent(message)}`, '_blank');
        break;
      case 'tiktok':
        window.open(`https://www.tiktok.com/@SAMURY`, '_blank');
        break;
    }

    closeBuyNowModal();
  });
});
// --- PRODUCT INFO MODAL ---
const modalOverlay = document.getElementById('modalOverlay');
const modalTitle = document.getElementById('modalTitle');
const modalDesc = document.getElementById('modalDesc');
const modalFabric = document.getElementById('modalFabric');
const modalSizes = document.getElementById('modalSizes');
const modalCare = document.getElementById('modalCare');
const thumbnailContainer = document.querySelector('.thumbnail-container');

let currentIndex = 0;
let carouselItems = [];

document.querySelectorAll('.product .info-btn').forEach(btn => {
  btn.addEventListener('click', e => {
    e.stopPropagation();

    const productEl = btn.closest('.product');
    const name = productEl.dataset.name;
    const info = productInfo[name];

    if (!info) {
      console.error("Product info not found for:", name);
      return;
    }

    modalTitle.textContent = name;
    modalDesc.textContent = info.desc;
    modalFabric.textContent = info.fabric;
    modalSizes.textContent = info.sizes;
    modalCare.textContent = info.care;

    const carousel = modalOverlay.querySelector('.carousel');

    // Clear previous
    carousel.querySelectorAll('img, video').forEach(el => el.remove());
    thumbnailContainer.innerHTML = '';
    carouselItems = [];
    currentIndex = 0;

    info.media.forEach((src, i) => {
      let mainEl;
      let thumbEl;

      if (src.endsWith('.mp4')) {
        mainEl = document.createElement('video');
        mainEl.src = encodeURI(src);
        mainEl.controls = true;
        mainEl.muted = true;
        mainEl.loop = true;
        mainEl.playsInline = true;

        thumbEl = document.createElement('video');
        thumbEl.src = encodeURI(src);
        thumbEl.muted = true;
      } else {
        mainEl = document.createElement('img');
        mainEl.src = encodeURI(src);

        thumbEl = document.createElement('img');
        thumbEl.src = encodeURI(src);
      }

      if (i === 0) {
        mainEl.classList.add('active');
        thumbEl.classList.add('active-thumb');
      }

      thumbEl.addEventListener('click', () => {
        changeMediaTo(i);
      });

      carousel.appendChild(mainEl);
      thumbnailContainer.appendChild(thumbEl);
      carouselItems.push(mainEl);
    });

    modalOverlay.style.display = 'flex';
  });
});

// Navigation buttons
document.querySelector('.carousel .prev').onclick = () => changeMedia(-1);
document.querySelector('.carousel .next').onclick = () => changeMedia(1);

function changeMedia(direction) {
  changeMediaTo((currentIndex + direction + carouselItems.length) % carouselItems.length);
}

function changeMediaTo(index) {
  if (!carouselItems.length) return;

  const thumbnails = thumbnailContainer.children;

  if (carouselItems[currentIndex].tagName === 'VIDEO') {
    carouselItems[currentIndex].pause();
  }

  carouselItems[currentIndex].classList.remove('active');
  thumbnails[currentIndex].classList.remove('active-thumb');

  currentIndex = index;

  carouselItems[currentIndex].classList.add('active');
  thumbnails[currentIndex].classList.add('active-thumb');

  if (carouselItems[currentIndex].tagName === 'VIDEO') {
    carouselItems[currentIndex].play();
  }
}

function closeModal() {
  carouselItems.forEach(el => {
    if (el.tagName === 'VIDEO') el.pause();
  });
  modalOverlay.style.display = 'none';
}
// --- Swipe Support for Mobile ---
let startX = 0;

const carouselElement = document.querySelector('.carousel');

carouselElement.addEventListener('touchstart', e => {
  startX = e.touches[0].clientX;
});

carouselElement.addEventListener('touchend', e => {
  let endX = e.changedTouches[0].clientX;
  let diff = startX - endX;

  if (Math.abs(diff) > 50) {
    if (diff > 0) {
      changeMedia(1); // swipe left
    } else {
      changeMedia(-1); // swipe right
    }
  }
});


// --- CLOSE MODAL ---
function closeModal(){
  const modalOverlay = document.getElementById('modalOverlay');
  const carousel = modalOverlay.querySelector('.carousel'); // âœ… define it here

  if(carousel){
    const items = carousel.querySelectorAll('video');
    items.forEach(v => v.pause());
  }

  modalOverlay.style.display = 'none';
}
function openModal(productName){
  const btn = Array.from(document.querySelectorAll('.product')).find(p => p.dataset.name === productName);
  if(btn){
    btn.querySelector('.info-btn').click(); // trigger the existing info-btn click logic
  }
}

// --- LIKE BUTTONS ---
document.querySelectorAll('.product .like-btn').forEach(btn=>{
  const name = btn.closest('.product').dataset.name;
  const savedLikes = JSON.parse(localStorage.getItem('likedProducts')||'{}');

  if(savedLikes[name]){
    btn.classList.add('liked');
    btn.innerHTML = '<i class="fa-solid fa-heart"></i>';
  } else {
    btn.classList.add('unliked');
    btn.innerHTML = '<i class="fa-regular fa-heart"></i>';
  }

  btn.addEventListener('click', e=>{
    e.stopPropagation();
    const isLiked = btn.classList.contains('liked');
    if(isLiked){
      btn.classList.remove('liked');
      btn.classList.add('unliked');
      btn.innerHTML = '<i class="fa-regular fa-heart"></i>';
    } else {
      btn.classList.remove('unliked');
      btn.classList.add('liked');
      btn.innerHTML = '<i class="fa-solid fa-heart"></i>';
    }
    const savedLikes = JSON.parse(localStorage.getItem('likedProducts')||'{}');
    savedLikes[name] = !isLiked;
    localStorage.setItem('likedProducts',JSON.stringify(savedLikes));
  });
});


// --- PRODUCT CARD VIDEO PLAY & HIDE PLAY ICON ---
document.querySelectorAll('.product .image-box').forEach(box => {
  const video = box.querySelector('video');
  const playIcon = box.querySelector('.play-icon');

  // Click on box to play/pause video
  box.addEventListener('click', () => {
    if (video.paused) {
      video.play();
      video.muted = false;
      playIcon.style.opacity = '0'; // hide play icon
    } else {
      video.pause();
      playIcon.style.opacity = '1'; // show play icon
    }
  });

  // Also hide play icon when video starts playing automatically (e.g., via hover)
  video.addEventListener('play', () => {
    playIcon.style.opacity = '0';
  });

  // Show play icon if video is paused by other means
  video.addEventListener('pause', () => {
    playIcon.style.opacity = '1';
  });
});


// --- ADD TO CART FUNCTIONALITY ---
document.querySelectorAll('.cart-btn').forEach(btn => {
  btn.addEventListener('click', e => {
    e.stopPropagation();

    const productEl = btn.closest('.product');
    const name = productEl.dataset.name;
    const priceText = productEl.querySelector('.price').textContent;
    const img = productEl.querySelector('.product-img').src;
    const qty = parseInt(productEl.querySelector('.qty-input').value);
    const size = productEl.querySelector('.size-select').value; // NEW

    const price = parseInt(priceText.replace(/[^0-9]/g, ''));
    let cart = JSON.parse(localStorage.getItem('cart') || '[]');

    // Check if product + size already exists in cart
    const existingIndex = cart.findIndex(item => item.name === name && item.size === size);
    if(existingIndex > -1){
      cart[existingIndex].qty += qty;
    } else {
      cart.push({ name, price, img, qty, size }); // include size
    }

    localStorage.setItem('cart', JSON.stringify(cart));

    alert(`${qty} x ${name} (Size: ${size}) added to cart!`);
  });
});


// --- AUTO-PAUSE VIDEO WHEN OUT OF VIEW ---
const productVideos = document.querySelectorAll('.product .product-video');

const observer = new IntersectionObserver((entries) => {
  entries.forEach(entry => {
    const video = entry.target;
    if(entry.isIntersecting){
      // video is in viewport, do nothing
    } else {
      // video is out of viewport, pause it
      if(!video.paused) video.pause();
    }
  });
}, {
  threshold: 0.5 // triggers when 50% of video is visible
});

// observe all product videos
productVideos.forEach(video => observer.observe(video));

// --- QUANTITY BUTTONS ---
document.querySelectorAll('.product').forEach(product => {
  const minusBtn = product.querySelector('.qty-minus');
  const plusBtn = product.querySelector('.qty-plus');
  const qtyInput = product.querySelector('.qty-input');

  minusBtn.addEventListener('click', () => {
    let current = parseInt(qtyInput.value);
    if(current > 1) qtyInput.value = current - 1;
  });

  plusBtn.addEventListener('click', () => {
    let current = parseInt(qtyInput.value);
    qtyInput.value = current + 1;
  });
});
function scrollToProductFromURL() {
  const params = new URLSearchParams(window.location.search);
  const productName = params.get('name');
  if (!productName) return;

  // Find product div with matching data-name
  const productEl = Array.from(document.querySelectorAll('.product'))
    .find(p => p.dataset.name === productName);
  
  if (productEl) {
    productEl.scrollIntoView({ behavior: 'smooth', block: 'center' });
    productEl.style.border = '2px solid gold';
    productEl.style.boxShadow = '0 0 20px rgba(255,215,0,0.7)';
    setTimeout(() => {
      productEl.style.border = '';
      productEl.style.boxShadow = '';
    }, 2500);
  }
}

// Run on page load
window.addEventListener('DOMContentLoaded', scrollToProductFromURL);

// --- BUY NOW FUNCTIONALITY ---
document.querySelectorAll('.buy-now').forEach(btn => {
  btn.addEventListener('click', e => {
    e.stopPropagation();

    const productEl = btn.closest('.product');
    const name = productEl.dataset.name;
    const priceText = productEl.querySelector('.price').textContent;
    const img = productEl.querySelector('.product-img').src;
    const qty = parseInt(productEl.querySelector('.qty-input').value);
    const size = productEl.querySelector('.size-select').value;

    const price = parseInt(priceText.replace(/[^0-9]/g, ''));
    let cart = JSON.parse(localStorage.getItem('cart') || '[]');

    // Check if product + size already exists in cart
    const existingIndex = cart.findIndex(item => item.name === name && item.size === size);
    if(existingIndex > -1){
      cart[existingIndex].qty += qty;
    } else {
      cart.push({ name, price, img, qty, size });
    }

    localStorage.setItem('cart', JSON.stringify(cart));
  });
});

</script>

</body>
</html>
